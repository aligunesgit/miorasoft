---
import { fetchPosts } from '~/utils/blog';
import Layout from '~/layouts/PageLayout.astro';
import BlogPost from '~/components/blog/SinglePost.astro';

export const prerender = true;

export async function getStaticPaths() {
  const posts = await fetchPosts();
  
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post }
  }));
}

const { post } = Astro.props;
---

<Layout metadata={{ title: post.title, description: post.excerpt, image: post.image }}>
  <BlogPost post={post} url={Astro.url} />
</Layout>