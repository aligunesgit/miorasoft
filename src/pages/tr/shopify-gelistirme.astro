---
import Layout from '~/layouts/PageLayout.astro';

import Header from '~/components/widgets/Header.astro';
import Hero2 from '~/components/widgets/Hero2.astro';
import Features from '~/components/widgets/Features.astro';
import Steps2 from '~/components/widgets/Steps2.astro';
import Content from '~/components/widgets/Content.astro';
import Pricing from '~/components/widgets/Pricing.astro';

import { headerData } from '~/navigation';
import FAQs from '~/components/widgets/FAQs.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import { getLangFromUrl, useTranslations } from '~/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const metadata = {
  title: t('shopifydev.meta.title'),
};
---

<Layout metadata={metadata}>
  <Fragment slot="header">
    <Header
      {...headerData}
      isSticky
    />
  </Fragment>

  <!-- Hero2 Widget ******************* -->

  <Hero2
    tagline={t('shopifydev.hero.tagline')}
    actions={[
      { variant: 'primary', text: t('shopifydev.hero.cta.primary'), href: 'javascript:void(0)', onclick: 'openCalendlyModal()' },
      { text: t('shopifydev.hero.cta.secondary'), href: '#features' },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1580481072645-022f9a6dbf27?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
      alt: t('shopifydev.hero.tagline'),
    }}
  >
    <Fragment slot="title">
      {t('shopifydev.hero.title.start')} <span class="text-accent dark:text-white">{t('shopifydev.hero.title.highlight')}</span>
    </Fragment>

    <Fragment slot="subtitle">
      <span class="hidden sm:inline">
        <span class="font-semibold">{t('shopifydev.hero.subtitle.bold')}</span>
      </span>
      {t('shopifydev.hero.subtitle').replace('{bold}', t('shopifydev.hero.subtitle.bold'))}
    </Fragment>
  </Hero2>

  <!-- Features Widget *************** -->

  <Features
    id="features"
    title={t('shopifydev.features.title')}
    subtitle={t('shopifydev.features.subtitle')}
    columns={2}
    items={[
      {
        title: t('shopifydev.feature1.title'),
        description: t('shopifydev.feature1.desc'),
        icon: 'tabler:palette',
      },
      {
        title: t('shopifydev.feature2.title'),
        description: t('shopifydev.feature2.desc'),
        icon: 'tabler:puzzle',
      },
      {
        title: t('shopifydev.feature3.title'),
        description: t('shopifydev.feature3.desc'),
        icon: 'tabler:trophy',
      },
      {
        title: t('shopifydev.feature4.title'),
        description: t('shopifydev.feature4.desc'),
        icon: 'tabler:atom',
      },
      {
        title: t('shopifydev.feature5.title'),
        description: t('shopifydev.feature5.desc'),
        icon: 'tabler:rocket',
      },
      {
        title: t('shopifydev.feature6.title'),
        description: t('shopifydev.feature6.desc'),
        icon: 'tabler:brain',
      },
    ]}
  />

  <!-- Content Widget **************** -->

  <Content
    title={t('shopifydev.content.title')}
    subtitle={t('shopifydev.content.subtitle')}
    isReversed
    items={[
      {
        title: t('shopifydev.startup.perfect'),
        description: t('shopifydev.startup.perfect.desc'),
      },
      {
        title: t('shopifydev.startup.get'),
        description: t('shopifydev.startup.get.desc'),
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1620558138198-cfb9b4f3c294?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1671&q=80',
      alt: t('shopifydev.startup.title'),
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        {t('shopifydev.startup.title')} <br /><span class="text-2xl">{t('shopifydev.startup.subtitle')}</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Content Widget **************** -->

  <Content
    isAfterContent={true}
    items={[
      {
        title: t('shopifydev.growing.perfect'),
        description: t('shopifydev.growing.perfect.desc'),
      },
      {
        title: t('shopifydev.growing.get'),
        description: t('shopifydev.growing.get.desc'),
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1531973486364-5fa64260d75b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1658&q=80',
      alt: t('shopifydev.growing.title'),
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        {t('shopifydev.growing.title')} <br /><span class="text-2xl">{t('shopifydev.growing.subtitle')}</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Content Widget **************** -->

  <Content
    isReversed
    isAfterContent={true}
    items={[
      {
        title: t('shopifydev.enterprise.perfect'),
        description: t('shopifydev.enterprise.perfect.desc'),
      },
      {
        title: t('shopifydev.enterprise.get'),
        description: t('shopifydev.enterprise.get.desc'),
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
      alt: t('shopifydev.enterprise.title'),
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        {t('shopifydev.enterprise.title')} <br /><span class="text-2xl">{t('shopifydev.enterprise.subtitle')}</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Content Widget **************** -->

  <Content
    items={[
      {
        title: t('shopifydev.migration.approach'),
        description: t('shopifydev.migration.approach.desc'),
      },
      {
        title: t('shopifydev.migration.benefits'),
        description: t('shopifydev.migration.benefits.desc'),
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1514621166532-aa7eb1a3a2f4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80',
      alt: t('shopifydev.migration.title'),
    }}
  >
    <Fragment slot="content">
      <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">
        {t('shopifydev.migration.title')} <br /><span class="text-2xl">{t('shopifydev.migration.subtitle')}</span>
      </h3>
    </Fragment>

    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </Content>

  <!-- Pricing Widget ******************* -->

  <Pricing
    title={t('shopifydev.pricing.title')}
    prices={[
      {
        title: t('shopifydev.pricing.starter.title'),
        subtitle: t('shopifydev.pricing.starter.subtitle'),
        price: t('shopifydev.pricing.starter.price'),
        period: t('shopifydev.pricing.starter.period'),
        callToAction: {
          text: t('shopifydev.pricing.starter.cta'),
          href: 'javascript:void(0)',
          onclick: 'openCalendlyModal()',
        },
      },
      {
        title: t('shopifydev.pricing.pro.title'),
        subtitle: t('shopifydev.pricing.pro.subtitle'),
        price: t('shopifydev.pricing.pro.price'),
        period: t('shopifydev.pricing.pro.period'),
        callToAction: {
          text: t('shopifydev.pricing.pro.cta'),
          href: 'javascript:void(0)',
          onclick: 'openCalendlyModal()',
        },
        hasRibbon: true,
        ribbonTitle: t('shopifydev.pricing.pro.ribbon'),
      },
      {
        title: t('shopifydev.pricing.enterprise.title'),
        subtitle: t('shopifydev.pricing.enterprise.subtitle'),
        price: t('shopifydev.pricing.enterprise.price'),
        period: t('shopifydev.pricing.enterprise.period'),
        callToAction: {
          text: t('shopifydev.pricing.enterprise.cta'),
          href: 'javascript:void(0)',
          onclick: 'openCalendlyModal()',
        },
      },
    ]}
  />

  <!-- FAQs Widget ******************* -->

  <FAQs
    title={t('shopifydev.faqs.title')}
    items={[
      {
        title: t('shopifydev.faq1.q'),
        description: t('shopifydev.faq1.a'),
        icon: 'tabler:chevrons-right',
      },
      {
        title: t('shopifydev.faq2.q'),
        description: t('shopifydev.faq2.a'),
        icon: 'tabler:chevrons-right',
      },
      {
        title: t('shopifydev.faq3.q'),
        description: t('shopifydev.faq3.a'),
        icon: 'tabler:chevrons-right',
      },
      {
        title: t('shopifydev.faq4.q'),
        description: t('shopifydev.faq4.a'),
        icon: 'tabler:chevrons-right',
      },
      {
        title: t('shopifydev.faq5.q'),
        description: t('shopifydev.faq5.a'),
        icon: 'tabler:chevrons-right',
      },
      {
        title: t('shopifydev.faq6.q'),
        description: t('shopifydev.faq6.a'),
        icon: 'tabler:chevrons-right',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </FAQs>

  <!-- Steps2 Widget ****************** -->

  <Steps2
    id="contact"
    title={t('shopifydev.contact.title')}
    subtitle={t('shopifydev.contact.subtitle')}
    callToAction={{
      text: t('shopifydev.contact.cta'),
      href: 'javascript:void(0)',
      onclick: 'openCalendlyModal()',
    }}
    items={[
      {
        title: t('shopifydev.contact.email'),
        description: t('shopifydev.contact.email.desc'),
        icon: 'tabler:mail',
      },
      {
        title: t('shopifydev.contact.call'),
        description: t('shopifydev.contact.call.desc'),
        icon: 'tabler:calendar',
      },
      {
        title: t('shopifydev.contact.social'),
        description: t('shopifydev.contact.social.desc'),
        icon: 'tabler:brand-instagram',
      },
    ]}
  />

  <!-- BlogLatestPost Widget **************** -->

  <BlogLatestPosts
    id="blog"
    title={t('shopifydev.blog.title')}
    information={t('shopifydev.blog.desc')}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </BlogLatestPosts>

  <!-- Calendly Modal -->
  <div id="calendly-modal" class="calendly-modal" style="display: none;">
    <div class="calendly-modal-overlay" onclick="closeCalendlyModal()"></div>
    <div class="calendly-modal-content">
      <button class="calendly-close-btn" onclick="closeCalendlyModal()">&times;</button>
      <div id="calendly-embed"></div>
    </div>
  </div>

  <!-- Calendly CSS -->
  <style>
    .calendly-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .calendly-modal-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
    }

    .calendly-modal-content {
      position: relative;
      width: 90%;
      max-width: 1000px;
      height: 90vh;
      max-height: 700px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      z-index: 10000;
    }

    .calendly-close-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 40px;
      height: 40px;
      background: rgba(0, 0, 0, 0.1);
      border: none;
      border-radius: 50%;
      font-size: 28px;
      line-height: 1;
      cursor: pointer;
      z-index: 10001;
      transition: all 0.2s;
      color: #333;
    }

    .calendly-close-btn:hover {
      background: rgba(0, 0, 0, 0.2);
      transform: rotate(90deg);
    }

    #calendly-embed {
      width: 100%;
      height: 100%;
    }

    #calendly-embed iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    @media (max-width: 768px) {
      .calendly-modal-content {
        width: 95%;
        height: 95vh;
      }
    }
  </style>

  <!-- Calendly Widget Script -->
  <script is:inline src="https://assets.calendly.com/assets/external/widget.js"></script>

  <!-- Calendly Modal Functions -->
  <script is:inline>
    function openCalendlyModal() {
      const modal = document.getElementById('calendly-modal');
      const embedDiv = document.getElementById('calendly-embed');
      
      const calendlyUrl = 'https://calendly.com/hello-miorasoft/30min';
      
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      
      // Calendly widget'ını embed et
      Calendly.initInlineWidget({
        url: calendlyUrl,
        parentElement: embedDiv,
        prefill: {
          email: 'hello@miorasoft.com',
          name: '',
          customAnswers: {
            a1: 'Shopify Development Services'
          }
        },
        utm: {
          utmSource: 'website',
          utmMedium: 'popup',
          utmCampaign: 'shopify-development'
        }
      });
    }

    function closeCalendlyModal() {
      const modal = document.getElementById('calendly-modal');
      const embedDiv = document.getElementById('calendly-embed');
      
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
      
      // Modal kapatıldığında içeriği temizle
      embedDiv.innerHTML = '';
    }

    // ESC tuşu ile kapatma
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeCalendlyModal();
      }
    });
  </script>
</Layout>