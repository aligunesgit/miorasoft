---
import Layout from '~/layouts/PageLayout.astro';
import Grid from '~/components/blog/Grid.astro';
import Hero from '~/components/widgets/Hero.astro';
import { fetchPosts } from '~/utils/blog';
import { getLangFromUrl, useTranslations } from '~/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const metadata = {
  title: t('blog.title') + ' - MIORA',
  description: t('blog.subtitle'),
};

const posts = await fetchPosts();
---

<Layout metadata={metadata}>
  <Hero>
    <Fragment slot="title">
      MIORA <span class="text-accent">{t('blog.title')}</span>
    </Fragment>
    <Fragment slot="subtitle">
      {t('blog.subtitle')}
    </Fragment>
  </Hero>

  <section class="px-4 py-16 mx-auto max-w-7xl lg:px-8 lg:py-20">
    <Grid posts={posts} />
  </section>
</Layout>